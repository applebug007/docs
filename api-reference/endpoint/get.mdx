---
title: "Health Check & API Info"
openapi: "GET /health"
---

## Health Check Endpoint

### GET /health

Monitor the status and health of the AI Detection service.

**Purpose**: Verify that the service is running and AI models are properly loaded before making detection requests.

#### Response Format

```json
{
  "status": "healthy",
  "models_loaded": true,
  "timestamp": "2024-01-15T10:30:00Z",
  "version": "1.0.0",
  "uptime_seconds": 3600,
  "memory_usage": {
    "total_mb": 2048,
    "used_mb": 1024,
    "available_mb": 1024
  }
}
```

<ResponseField name="status" type="string">
  Overall service health status
  - `"healthy"`: Service is running normally
  - `"degraded"`: Service running but with issues
  - `"unhealthy"`: Service has critical problems
</ResponseField>

<ResponseField name="models_loaded" type="boolean">
  Whether AI detection models are loaded and ready
</ResponseField>

<ResponseField name="timestamp" type="string">
  ISO 8601 timestamp when health check was performed
</ResponseField>

<ResponseField name="version" type="string">
  Current version of the AI detection service
</ResponseField>

<ResponseField name="uptime_seconds" type="number">
  Service uptime in seconds since last restart
</ResponseField>

<ResponseField name="memory_usage" type="object">
  Memory usage statistics (optional)
</ResponseField>

#### Code Examples

```bash
curl -X GET "http://localhost:8003/health"
```

---

## API Information Endpoint

### GET /

Get general information about the AI Detection API and available endpoints.

**Purpose**: Discover API capabilities, version information, and available endpoints.

#### Response Format

```json
{
  "service": "AI Image Detection API",
  "version": "1.0.0",
  "description": "Detect AI-generated images with high accuracy",
  "endpoints": {
    "/health": "Service health check",
    "/models": "Available detection models",
    "/predict": "File upload detection",
    "/detect": "Base64 image detection"
  },
  "supported_formats": ["JPEG", "PNG", "BMP", "GIF", "WEBP"],
  "max_file_size_mb": 10,
  "documentation": "https://docs.example.com/ai-detection"
}
```

<ResponseField name="service" type="string">
  Service name and description
</ResponseField>

<ResponseField name="version" type="string">
  Current API version
</ResponseField>

<ResponseField name="endpoints" type="object">
  Available API endpoints with descriptions
</ResponseField>

<ResponseField name="supported_formats" type="array">
  List of supported image formats
</ResponseField>

<ResponseField name="max_file_size_mb" type="number">
  Maximum allowed file size in megabytes
</ResponseField>

#### Code Examples

```bash
curl -X GET "http://localhost:8003/"
```

---

## Models Information Endpoint

### GET /models

Get information about available AI detection models.

**Purpose**: Discover which AI models are available for detection and their characteristics.

#### Response Format

```json
{
  "available_models": [
    {
      "name": "patchcraft",
      "version": "v0.1",
      "description": "Primary AI detection model with high accuracy",
      "accuracy": "96.7%",
      "supported_formats": ["JPEG", "PNG", "BMP", "GIF", "WEBP"],
      "optimal_image_size": "1024x1024",
      "processing_time_ms": 200,
      "status": "active"
    }
  ],
  "default_model": "patchcraft",
  "total_models": 1
}
```

<ResponseField name="available_models" type="array">
  List of available detection models
  
  <Expandable title="Model object properties">
    <ResponseField name="name" type="string">
      Model identifier name
    </ResponseField>
    <ResponseField name="version" type="string">
      Model version
    </ResponseField>
    <ResponseField name="description" type="string">
      Model description and capabilities
    </ResponseField>
    <ResponseField name="accuracy" type="string">
      Model accuracy percentage
    </ResponseField>
    <ResponseField name="supported_formats" type="array">
      Image formats supported by this model
    </ResponseField>
    <ResponseField name="optimal_image_size" type="string">
      Recommended image dimensions for best performance
    </ResponseField>
    <ResponseField name="processing_time_ms" type="number">
      Average processing time in milliseconds
    </ResponseField>
    <ResponseField name="status" type="string">
      Model status: `"active"`, `"loading"`, `"inactive"`
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="default_model" type="string">
  Name of the default model used when none specified
</ResponseField>

<ResponseField name="total_models" type="number">
  Total number of available models
</ResponseField>

#### Code Examples

```bash
curl -X GET "http://localhost:8003/models"
```

## Best Practices

### Service Readiness Check

Before making detection requests, ensure the service is ready:

```python
def wait_for_service_ready(max_wait_seconds=60):
    """
    Wait for the AI detection service to be ready
    
    Args:
        max_wait_seconds (int): Maximum time to wait
        
    Returns:
        bool: True if service becomes ready, False if timeout
    """
    import time
    
    start_time = time.time()
    
    while time.time() - start_time < max_wait_seconds:
        health_info, is_ready = check_service_health()
        
        if is_ready:
            print("✅ Service is ready!")
            return True
            
        print("⏳ Waiting for service to be ready...")
        time.sleep(5)
    
    print("❌ Service did not become ready within timeout")
    return False

# Example usage
if wait_for_service_ready():
    # Proceed with detection requests
    result = detect_ai_image("sample.jpg")
else:
    print("Cannot proceed - service not ready")
```

### Health Monitoring

Implement regular health checks in production:

```javascript
class ServiceMonitor {
    constructor(checkIntervalMs = 30000) {
        this.checkInterval = checkIntervalMs;
        this.isMonitoring = false;
        this.healthStatus = null;
    }
    
    startMonitoring() {
        if (this.isMonitoring) return;
        
        this.isMonitoring = true;
        console.log('🔍 Starting service monitoring...');
        
        const monitor = async () => {
            while (this.isMonitoring) {
                try {
                    const { healthData, isHealthy } = await checkServiceHealth();
                    this.healthStatus = { healthData, isHealthy, lastCheck: new Date() };
                    
                    if (!isHealthy) {
                        console.warn('⚠️ Service health check failed:', healthData);
                    }
                    
                } catch (error) {
                    console.error('❌ Health monitoring error:', error);
                }
                
                await new Promise(resolve => setTimeout(resolve, this.checkInterval));
            }
        };
        
        monitor();
    }
    
    stopMonitoring() {
        this.isMonitoring = false;
        console.log('🛑 Stopped service monitoring');
    }
    
    getLastHealthStatus() {
        return this.healthStatus;
    }
}

// Example usage
const monitor = new ServiceMonitor(30000); // Check every 30 seconds
monitor.startMonitoring();
```

<Info>
**Production Tip**: Implement health checks as part of your application startup sequence and monitoring strategy. Regular health checks help ensure reliable service operation.
</Info>

<Warning>
**Service Dependencies**: Always check that `models_loaded` is `true` before making detection requests. Requests made before models are loaded will fail.
</Warning>
