---
title: "AI Image Detection - Base64"
openapi: "POST /detect"
---

## Overview

The `/detect` endpoint accepts base64-encoded image data for AI detection analysis. This method is ideal for web applications where images are already in base64 format or when integrating with systems that handle image data programmatically.

## Request Parameters

### JSON Body Parameters

<ParamField body="task_id" type="string">
  Unique identifier for the detection task. Used for tracking and logging purposes.
  
  **Format**: Any string up to 100 characters  
  **Example**: `"user_upload_001"`, `"batch_process_123"`
</ParamField>

<ParamField body="timestamp" type="string">
  ISO 8601 timestamp when the request was created.
  
  **Format**: `YYYY-MM-DDTHH:mm:ss.sssZ`  
  **Example**: `"2024-01-15T10:30:00.000Z"`
</ParamField>

<ParamField body="usecase_environment" type="object">
  Configuration parameters for the detection process.
  
  <Expandable title="usecase_environment properties">
    <ParamField body="threshold" type="number" default="0.5">
      Detection sensitivity threshold (0.0 to 1.0)
      - **0.2**: High sensitivity, more false positives
      - **0.5**: Balanced detection (recommended)
      - **0.8**: High precision, fewer false positives
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="ai_model_info" type="object">
  Information about which AI model to use for detection.
  
  <Expandable title="ai_model_info properties">
    <ParamField body="model_name" type="string" default="patchcraft">
      Name of the detection model to use
    </ParamField>
    <ParamField body="model_version" type="string" default="v0.1">
      Version of the detection model
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="data" type="object" required>
  The image data to analyze.
  
  <Expandable title="data properties">
    <ParamField body="type" type="string" required>
      Type of data being sent. Must be `"image"`
    </ParamField>
    <ParamField body="payload" type="string" required>
      Base64-encoded image data (without data URI prefix)
      
      **Format**: Raw base64 string  
      **Example**: `"/9j/4AAQSkZJRgABAQAAAQABAAD..."`
    </ParamField>
  </Expandable>
</ParamField>

<RequestExample>

```json Full Request
{
  "task_id": "user_upload_001",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "usecase_environment": {
    "threshold": 0.5
  },
  "ai_model_info": {
    "model_name": "patchcraft",
    "model_version": "v0.1"
  },
  "data": {
    "type": "image",
    "payload": "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="
  }
}
```

```json Minimal Request
{
  "data": {
    "type": "image", 
    "payload": "/9j/4AAQSkZJRgABAQAAAQABAAD..."
  }
}
```

</RequestExample>

## Response Format

<ResponseExample>

```json
{
  "task_id": "user_upload_001",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "result": {
    "status": "completed",
    "confidence_score": 0.87,
    "likely_ai_generated": true,
    "processing_time_ms": 245,
    "model_info": {
      "name": "patchcraft",
      "version": "v0.1"
    },
    "image_metadata": {
      "width": 1024,
      "height": 1024,
      "channels": 3,
      "format": "JPEG"
    }
  }
}
```

</ResponseExample>

<ResponseField name="task_id" type="string">
  The task identifier from the request (or generated if not provided)
</ResponseField>

<ResponseField name="timestamp" type="string">
  ISO 8601 timestamp when the response was generated
</ResponseField>

<ResponseField name="result" type="object">
  Detection analysis results
  
  <Expandable title="result properties">
    <ResponseField name="status" type="string">
      Processing status: `"completed"`, `"failed"`, `"error"`
    </ResponseField>
    
    <ResponseField name="confidence_score" type="number">
      AI detection confidence score (0.0 to 1.0)
      - 0.0: Definitely real/human-created
      - 1.0: Definitely AI-generated
    </ResponseField>
    
    <ResponseField name="likely_ai_generated" type="boolean">
      Whether the image is likely AI-generated based on threshold
    </ResponseField>
    
    <ResponseField name="processing_time_ms" type="number">
      Time taken to process the image in milliseconds
    </ResponseField>
    
    <ResponseField name="model_info" type="object">
      Information about the detection model used
    </ResponseField>
    
    <ResponseField name="image_metadata" type="object">
      Technical information about the processed image
    </ResponseField>
  </Expandable>
</ResponseField>



## Code Examples

```bash
# Full request with all parameters
curl -X POST "http://localhost:8003/detect" \
  -H "Content-Type: application/json" \
  -d '{
    "task_id": "curl_test_001",
    "timestamp": "2024-01-15T10:30:00.000Z",
    "usecase_environment": {
      "threshold": 0.6
    },
    "ai_model_info": {
      "model_name": "patchcraft",
      "model_version": "v0.1"
    },
    "data": {
      "type": "image",
      "payload": "'$(base64 -i sample_image.jpg)'"
    }
  }'

# Minimal request
curl -X POST "http://localhost:8003/detect" \
  -H "Content-Type: application/json" \
  -d '{
    "data": {
      "type": "image",
      "payload": "'$(base64 -i sample_image.jpg)'"
    }
  }'
```

## Base64 Encoding Tips

<Tip>
**Proper Base64 Encoding**
- Remove any data URI prefixes (`data:image/jpeg;base64,`)
- Ensure the base64 string contains only valid characters (A-Z, a-z, 0-9, +, /, =)
- Verify the encoded data represents a valid image format
</Tip>

<Warning>
**Size Considerations**
- Base64 encoding increases data size by ~33%
- A 3MB image becomes ~4MB when base64 encoded
- Consider image compression before encoding for large files
</Warning>

## Use Cases

<CardGroup cols={2}>
  <Card title="Web Applications" icon="globe">
    Direct integration with canvas, drag-drop uploads, or image manipulation
  </Card>
  <Card title="API Integration" icon="code">
    Programmatic detection when images are already in base64 format
  </Card>
  <Card title="Batch Processing" icon="list">
    Process multiple images programmatically with tracking via task_id
  </Card>
  <Card title="Mobile Apps" icon="mobile">
    Send captured or selected images without file system access
  </Card>
</CardGroup>

## Testing with Postman

The provided Postman collection includes tests for this endpoint:

1. **Full Base64 Request**: Complete request with all parameters
2. **Minimal Base64 Request**: Minimal request with only required fields  
3. **Error Testing**: Invalid base64 data handling
4. **Task ID Preservation**: Verify task_id is returned correctly

The collection includes automated tests that verify response structure and task ID handling.
